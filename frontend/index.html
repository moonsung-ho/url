<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>url 단축기</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <style>
      @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/static/pretendard.css");
      * {
        font-family: Pretendard;
      }
      body {
        text-align: center;
        padding: 50px;
      }
    </style>
  </head>
  <body>
    <!-- <label for="urlinput">단축할 URL</label>
    <input
      type="url"
      name="url 입력"
      id="urlinput"
      placeholder="https://example.com"
    /> -->
    <h1 class="fw-bolder">URL 단축하기</h1>
    <div class="input-group mb-3">
      <span class="input-group-text" id="basic-addon31">줄일 URL</span>
      <input
        type="url"
        class="form-control"
        id="urlinput"
        aria-describedby="basic-addon31"
        placeholder="https://example.com"
      />
    </div>
    <!-- <div id="inputtext">
      <label for="input"
        >ㅇㅇ<input type="text" name="링크" id="input"
      /></label>
    </div> -->
    <div class="input-group mb-3">
      <span class="input-group-text" id="basic-addon3">https://</span>
      <input
        type="text"
        class="form-control"
        id="input"
        aria-describedby="basic-addon3"
      />
    </div>
    <input class="btn btn-primary" type="submit" value="줄이기" id="submit" />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/toastify-js"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script>
      document.querySelector("#input").value = Math.random()
        .toString(36)
        .substr(2, 6);
      document.querySelector(
        "#basic-addon3"
      ).innerHTML = `https://${location.host}/`;
      document.querySelector("#submit").addEventListener("click", (event) => {
        const url = document.querySelector("#urlinput").value;
        const to = document.querySelector("#input").value;
        console.log(`${location.host}/shorten?url=${url}&to=${to}`);
        fetch(`/shorten/?url=${url}&to=${to}`);
        Toastify({
          text: `${location.host}/${to}`,
          duration: 3000,
          destination: `https://${location.host}/${to}`,
          gravity: "bottom", // `top` or `bottom`
          position: "center", // `left`, `center` or `right`
          stopOnFocus: true, // Prevents dismissing of toast on hover
          style: {
            "font-family": "Pretendard"
          },
          onClick: function () {} // Callback after click
        }).showToast();
      });
      if (location.search.split("=")[1] === "urldoesnotexist") {
        Toastify({
          text: "URL이 존재하지 않아요.",
          duration: 3000,
          gravity: "bottom", // `top` or `bottom`
          position: "center", // `left`, `center` or `right`
          stopOnFocus: true, // Prevents dismissing of toast on hover
          style: {
            "font-family": "Pretendard"
          },
          onClick: function () {} // Callback after click
        }).showToast();
      }
    </script>
  </body>
</html>
